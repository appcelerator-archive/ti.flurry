language: objective-c
before_install:
    - MODULE_ROOT=$PWD
install: 
    - mkdir -p /Library/Application\ Support/Titanium/sdks/
    - wget http://builds.appcelerator.com/mobile/3_1_X/mobilesdk-3.1.3.v20130909184609-osx.zip -O /Library/Application\ Support/Titanium/mobilesdk-3.1.3-osx.zip
    - cd /Library/Application\ Support/Titanium/
    - unzip -o  mobilesdk-3.1.3-osx.zip
    - export TITANIUM_SDK=${PWD}/mobilesdk/osx/3.1.3/android

    - cd /Library/Application\ Support/Titanium/sdks/
    - wget http://dl.google.com/android/android-sdk_r22.6.2-macosx.zip
    - unzip -o android-sdk_r22.6.2-macosx.zip
    - export ANDROID_HOME=${PWD}/android-sdk-macosx

    - export PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools

    # Install required Android components.
    - echo "y" | android update sdk --filter platform-tools,android-10,addon-google_apis-google-10,extra-android-support,$ANDROID_SDKS --no-ui --force
    
    - cd /Library/Application\ Support/Titanium/sdks/
    - wget http://dl.google.com/android/ndk/android-ndk-r9d-darwin-x86.tar.bz2
    - tar xzf android-ndk-r9d-darwin-x86.tar.bz2
    - export ANDROID_NDK=${PWD}/android-ndk-r9d
    
    #- export CLASSPATH=${CLASSPATH}:${ANDROID_HOME}/platforms/android-10/android.jar
    #- export CLASSPATH=${CLASSPATH}:${ANDROID_HOME}/add-ons/addon-google_apis-google-10/libs/maps.jar"
    #- export CLASSPATH=${CLASSPATH}:${TITANIUM_SDK}/titanium.jar
    #- export CLASSPATH=${CLASSPATH}:${TITANIUM_SDK}/kroll-common.jar
    #- export CLASSPATH=${CLASSPATH}:${TITANIUM_SDK}/kroll-apt.jar
    #- export CLASSPATH=${CLASSPATH}:${MODULE_ROOT}/android/lib/flurryAnalytics_3.4.0.jar
    
before_script:
    - cd /Library/Application\ Support/Titanium/mobilesdk/osx/3.1.3/android
    - ls -ltr /Library/Application\ Support/Titanium/sdks/android-sdk-macosx/platforms/android-10/
    - cd $MODULE_ROOT
script: 
    #- cd ./ios/
    #- ./build.py
    - cd ./android/
    - ant clean
    - ant
